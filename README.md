# Smart City Data Generator (Smart Pole Energy Simulator)

‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Smart Pole ‡πÅ‡∏•‡∏∞ Weather Station ‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå

## ‚ú® Features / ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥

- üîå **‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå** - ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏Ç‡∏≠‡∏á Smart Pole ‡∏ï‡∏≤‡∏°‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°‡∏à‡∏£‡∏¥‡∏á
- üí° **Smart Pole Control** - ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î Smart Pole ‡πÑ‡∏î‡πâ‡πÅ‡∏ö‡∏ö Real-time
- üå°Ô∏è **Weather Station Simulation** - ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡∏™‡∏ï‡∏¥‡∏Å (‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô, ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏°‡πÅ‡∏™‡∏á, ‡∏Ø‡∏•‡∏Ø)
- üì¶ **Module-based Power Consumption** - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡πÇ‡∏°‡∏î‡∏π‡∏•‡∏ï‡πà‡∏≤‡∏á‡πÜ:
  - LED Street Light (‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏°‡πÅ‡∏™‡∏á)
  - Security Camera
  - Environmental Sensors
  - WiFi Access Point
  - Digital Display
  - EV Charging Station
- üêò **PostgreSQL Database** - ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡πâ‡∏ß‡∏¢ PostgreSQL ‡∏ú‡πà‡∏≤‡∏ô Docker
- üê≥ **Docker Support** - ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢ Docker Compose

## üìã Prerequisites / ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ

- Docker ‡πÅ‡∏•‡∏∞ Docker Compose
- Python 3.8 ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤
- pip (Python package manager)

## üöÄ Installation / ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á

### 1. Clone Repository

```bash
git clone https://github.com/nuttooo/generate-data-for-smart-city.git
cd generate-data-for-smart-city
```

### 2. Setup Environment Variables

```bash
cp .env.example .env
```

‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `.env` ‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ (‡∏Ñ‡πà‡∏≤ default ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢)

### 3. Start PostgreSQL Database

```bash
docker-compose up -d
```

‡∏£‡∏≠‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤ database ‡∏à‡∏∞‡∏û‡∏£‡πâ‡∏≠‡∏° (‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 10-15 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)

```bash
docker-compose ps
```

### 4. Install Python Dependencies

```bash
pip install -r requirements.txt
```

## üìñ Usage / ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### Generate Single Data Cycle / ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß

```bash
python main.py generate
```

### Continuous Data Generation / ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á

```bash
# Default: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏∏‡∏Å 60 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
python main.py continuous

# Custom interval: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏∏‡∏Å 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
python main.py continuous 30
```

### List All Smart Poles / ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Smart Pole ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

```bash
python main.py list
```

### Control Smart Poles / ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° Smart Pole

```bash
# ‡πÄ‡∏õ‡∏¥‡∏î Smart Pole
python main.py control SP001 on

# ‡∏õ‡∏¥‡∏î Smart Pole
python main.py control SP002 off

# ‡∏™‡∏•‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (Toggle)
python main.py control SP003 toggle
```

### View Latest Data / ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î

```bash
python main.py view
```

## üóÑÔ∏è Database Schema / ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

### Tables / ‡∏ï‡∏≤‡∏£‡∏≤‡∏á

1. **smart_poles** - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Smart Pole
   - pole_id (unique identifier)
   - location (‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á)
   - latitude, longitude (‡∏û‡∏¥‡∏Å‡∏±‡∏î)
   - status (on/off)

2. **smart_pole_modules** - ‡πÇ‡∏°‡∏î‡∏π‡∏•‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏Ç‡∏≠‡∏á Smart Pole
   - pole_id (FK to smart_poles)
   - module_type (lighting, camera, sensor, wifi, display, charging)
   - power_rating_w (‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ)

3. **smart_pole_energy** - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô
   - pole_id (FK to smart_poles)
   - timestamp
   - power_consumption_w (‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ Watts)
   - voltage_v (‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô Volts)
   - current_a (‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ Amperes)
   - energy_kwh (‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô kWh)
   - status

4. **weather_station** - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®
   - station_id
   - timestamp
   - temperature_c (‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥ ¬∞C)
   - humidity_percent (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô %)
   - pressure_hpa (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏î‡∏≠‡∏≤‡∏Å‡∏≤‡∏® hPa)
   - wind_speed_ms (‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏•‡∏° m/s)
   - wind_direction_deg (‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á‡∏•‡∏° ‡∏≠‡∏á‡∏®‡∏≤)
   - rainfall_mm (‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏ù‡∏ô mm)
   - light_intensity_lux (‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏°‡πÅ‡∏™‡∏á lux)

## üî¨ Realistic Simulation Features / ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏•‡∏≠‡∏á‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡∏™‡∏ï‡∏¥‡∏Å

### 1. Time-based Power Consumption / ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤

- **LED Lighting**: ‡∏õ‡∏£‡∏±‡∏ö‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÑ‡∏ü‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏°‡πÅ‡∏™‡∏á‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥
  - ‡∏Å‡∏•‡∏≤‡∏á‡∏ß‡∏±‡∏ô (‡πÅ‡∏™‡∏á‡∏™‡∏ß‡πà‡∏≤‡∏á): ‡πÉ‡∏ä‡πâ‡πÑ‡∏ü 10-30%
  - ‡∏Å‡∏•‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô: ‡πÉ‡∏ä‡πâ‡πÑ‡∏ü 100%
  
- **Digital Display**: ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
  - 06:00-22:00: ‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡πÄ‡∏ï‡πá‡∏° 100%
  - 22:00-06:00: ‡∏•‡∏î‡πÄ‡∏´‡∏•‡∏∑‡∏≠ 30%

- **EV Charging Station**: ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏° (0-100%)

### 2. Weather-based Simulation / ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®

- ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤ (‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏ä‡πà‡∏ß‡∏á 14:00-15:00)
- ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏ú‡∏Å‡∏ú‡∏±‡∏ô‡∏Å‡∏±‡∏ö‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥
- ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏°‡πÅ‡∏™‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤ (0-120,000 lux)
- ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏î‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÅ‡∏•‡∏∞‡∏•‡∏°‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡∏ï‡∏≤‡∏°‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥

### 3. Module-specific Variations / ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏õ‡∏£‡∏õ‡∏£‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÇ‡∏°‡∏î‡∏π‡∏•

‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÇ‡∏°‡∏î‡∏π‡∏•‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏õ‡∏£‡∏õ‡∏£‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô:
- Lighting: ¬±15%
- Camera: ¬±10%
- Sensors: ¬±5%
- WiFi: ¬±12%
- Display: ¬±20%
- Charging: ¬±30%

## üìä Example Queries / ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á SQL

### ‡∏î‡∏π‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

```sql
SELECT 
    DATE_TRUNC('hour', timestamp) as hour,
    SUM(energy_kwh) as total_energy_kwh
FROM smart_pole_energy
WHERE timestamp >= NOW() - INTERVAL '24 hours'
GROUP BY hour
ORDER BY hour;
```

### ‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Smart Pole ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

```sql
SELECT 
    sp.pole_id,
    sp.location,
    sp.status,
    COUNT(spm.id) as module_count,
    SUM(spm.power_rating_w) as total_power_rating
FROM smart_poles sp
LEFT JOIN smart_pole_modules spm ON sp.pole_id = spm.pole_id
GROUP BY sp.pole_id, sp.location, sp.status;
```

### ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î

```sql
SELECT *
FROM weather_station
ORDER BY timestamp DESC
LIMIT 10;
```

## üõ†Ô∏è Advanced Configuration / ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á

### Custom Smart Poles / ‡πÄ‡∏û‡∏¥‡πà‡∏° Smart Pole ‡πÉ‡∏´‡∏°‡πà

‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå `init.sql` ‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏° Smart Pole ‡πÉ‡∏´‡∏°‡πà:

```sql
INSERT INTO smart_poles (pole_id, location, latitude, longitude, status) 
VALUES ('SP006', 'New Location', 13.776717, 100.563186, 'on');
```

### Custom Modules / ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏°‡∏î‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà

```sql
INSERT INTO smart_pole_modules (pole_id, module_type, module_name, power_rating_w)
VALUES ('SP006', 'custom', 'Custom Module', 50.0);
```

## üß™ Testing / ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö

### Test Database Connection / ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

```bash
docker-compose exec postgres psql -U admin -d smart_city -c "SELECT COUNT(*) FROM smart_poles;"
```

### Test Data Generation / ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

```bash
python main.py generate
python main.py view
```

## üêõ Troubleshooting / ‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤

### Database Connection Error

```bash
# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ PostgreSQL ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà
docker-compose ps

# ‡∏î‡∏π logs
docker-compose logs postgres

# Restart database
docker-compose restart postgres
```

### Module Not Found Error

```bash
# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á dependencies ‡πÉ‡∏´‡∏°‡πà
pip install -r requirements.txt
```

## üìù License

This project is open source and available under the MIT License.

## üë• Contributors

- nuttooo

## üôè Acknowledgments

‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö Smart City ‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡∏û‡∏±‡∏í‡∏ô‡∏≤